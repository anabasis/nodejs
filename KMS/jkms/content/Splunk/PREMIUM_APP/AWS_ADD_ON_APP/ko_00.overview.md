# 개요

Amazon Web Services 용 Splunk 애드온을 사용하면 Splunk 소프트웨어 관리자가 다음을 수집

- AWS Config 서비스의 구성 스냅 샷, 구성 변경 및 기록 구성 데이터.
- AWS EC2 인스턴스, 예약 인스턴스 및 EBS 스냅 샷에 대한 메타 데이터.
- AWS Config Rules의 준수 세부 정보, 준수 요약 및 평가 상태.
- Amazon Inspector 서비스에서 실행 및 결과 데이터 평가.
- AWS CloudTrail 서비스의 이벤트 관리 및 변경.
- VPC Flow Log 및 CloudWatch 로그 서비스의 다른 로그
- AWS CloudWatch 서비스의 실적 및 청구 측정 항목
- AWS에서 구성한 Billing 보고서.
- S3, CloudFront 및 ELB 액세스 로그
- S3 버킷의 일반 데이터.
- Kinesis 스트림의 일반 데이터.
- SQS의 일반 데이터.

이 Add-on은 AWS, Splunk Enterprise Security 및 Splunk IT Service Intelligence 용 Splunk 응용 프로그램과 같은 다른 응용 프로그램과 함께 사용할 수있는 modular inputs 및 CIM 호환 정보를 제공

## Amazon Web Services 용 Splunk 애드온 정보

|버전|4.5.0|
|:--:|:--|
|Vendor Products|Amazon Web Services CloudTrail, CloudWatch, CloudWatch Logs, Config, Config Rules, Inspector, Kinesis, S3, VPC Flow Log, Billing services, SQS, and SNS|
|Visible in Splunk Web|Yes. This add-on contains views for configuration.|

Amazon Web Services 용 Splunk Add-on을 사용하면 Splunk 소프트웨어 관리자가 다음을 수집

- AWS Config 서비스의 구성 스냅 샷, 구성 변경 및 기록 구성 데이터.
- AWS EC2 인스턴스, 예약 인스턴스 및 EBS 스냅 샷에 대한 메타 데이터
- AWS Config Rules의 준수 세부 정보, 준수 요약 및 평가 상태.
- Amazon Inspector 서비스에서 실행 및 결과 데이터 평가.
- AWS CloudTrail 서비스의 이벤트 관리 및 변경.
- VPC 흐름 로그 및 CloudWatch 로그 서비스의 다른 로그
- AWS CloudWatch 서비스의 실적 및 청구 측정 항목
- AWS에서 구성한 청구 보고서.
- S3, CloudFront 및 ELB 액세스 로그
- S3 버킷의 일반 데이터.
- Kinesis 스트림의 일반 데이터.
- SQS의 일반 데이터.

이 Add-on은 modular inputs 및 [CIM](http://docs.splunk.com/Documentation/CIM/4.11.0/User/Overview) 호환 지식을 제공하여 Splunk App과 같은 다른 Splunk App과 함께 사용할 수 있습니다. AWS, Splunk Enterprise Security 및 Splunk IT Service Intelligence를 포함

CloudTrail, CloudWatch, Config, Config Rules, Amazon Inspector 및 VPC Flow Logs 데이터 만 CIM 준수를 위해 태그가 지정됩니다. S3버킷과 Kinesis에서 수집한 데이터는 예측할 수 없으므로 add-on를 CIM 데이터 모델로 정규화 할 수 없습니다.

Amazon 계정과 통합하고 AWS에서 Splunk 플랫폼으로 데이터를 푸시하는 다른 방법을 제공하는 Amazon Kinesis Firehose용 Splunk 애드온을 사용하여 데이터를 수집 할 수도 있습니다. 자세한 내용은 [About the Splunk Add-on for Amazon Kinesis Firehose](http://docs.splunk.com/Documentation/AddOns/released/Firehose/About)를 참조하십시오.

Splunkbase에서 [Amazon Web Services 용 Splunk 애드온](http://splunkbase.splunk.com/app/1876)을 다운로드하십시오.

새로운 기능, 수정 된 문제 및 알려진 문제점에 대한 요약은 [Amazon Web Services의 Splunk 애드온 릴리스 노트](http://docs.splunk.com/Documentation/AddOns/released/AWS/Releasenotes)를 참조하십시오. .

Amazon Web Services 용 Splunk 애드온의 설치 및 구성에 대한 자세한 내용은 Amazon Web Services 용 Splunk 애드온의 설치 및 구성 개요 (http://docs.splunk.com/Documentation/AddOns/released/)를 참조하십시오. AWS / 설치 단계).

Splunk Answers의 [Amazon Web Services 용 Splunk 애드온 관련 질문](http://answers.splunk.com/answers/app/1876)을 참조하십시오.

## AWS 용 Splunk 애드온의 소스 유형

AWS 용 Splunk 애드온의 소스 유형
Amazon Web Services 용 Splunk 애드온은 다음 형식의 알림, 이벤트 및 성능 메트릭에 대한 색인 시간 및 검색 시간 지식을 제공합니다.

<table>
<tr><td> <td> </td> </td> </td> </td> </td> </td>
</td> <td> AWS : config </td> <td> AWS Config 서비스의 구성 스냅 샷 및 기록 구성 데이터 </td> <td> <td rowspan = td> <td rowspan = 2> 없음 </td> </tr>
</td> <td> 변경 분석 </td> </tr> <td> AWS : 구성 :
<td> 설명 </td> <td> aws : description </td> <td> 대시 보드 가독성을 향상시키는 데 사용되는 AWS EC2 인스턴스, 예약 인스턴스 및 EBS 스냅 샷에 대한 설명입니다. </td> <td > 없음 </td> <td> 가상화 </td> </tr>
<td> <td> 구성 규칙 </td> <td> aws : config : rule </td> <td> 준수 세부 정보, 준수 요약 및 AWS 구성 규칙의 평가 상태 </td> </td> <td> 없음 </td> </tr>
Amazon Inspector 서비스에서 평가 실행 및 결과 데이터 <td> <td> <td> </ dd> <td> </ dd> <td> td> 없음 </td> </tr>
</td> <td> AWS : Cloudtrail </td> <td> AWS CloudTrail 서비스의 AWS API 호출 기록 </td> <td> 없음 </td> </tr>
CloudWatch 로그 서비스의 데이터입니다. </td> <td> </td> <td rowspan = 2> CloudWatch 로그 </td> = 2> 없음 </td> </tr>
</td> <td> 네트워크 트래픽 </td> </tr> </td> </td> </td> </td> </td>
<td> AWS Cloudwatch </td> <td> AWS : cloudwatch </td> <td> AWS CloudWatch 서비스의 성능 및 청구량 통계 </td> <td> 성능, 데이터베이스 </td> <td> > 가상화 </td> </tr>
<td rowspan = 2> 없음 </td> <td> aws : 결제 </td> <td> AWS에서 구성한 결제 보고서 </td> <td rowspan = 2> 없음 </ td > <td rowspan = 2> 없음 </td> </tr>
AWS에서 구성한 비용 및 사용 보고서 </td> </tr> <tr> <td> aws : billing : cur </td>
S3 버킷의 일반 로그 데이터입니다. </td> <td rowspan = 5> 없음 </td> <td rowspan = 5> S3 </td> <td rowspan = 5> 없음 </td> </tr>
<td> aws : s3 : accesslogs </td> <td> S3 액세스 로그 </td> </tr>
<td> aws : cloudfront : accesslogs </td> <td> CloudFront 액세스 로그 </td> </tr>
</td> </tr> </td> </td> </tr>
<tr> <td> aws : cloudtrail </td> <td> Cloudtrail 데이터 </td> </tr>
</td> 없음 </td> 없음 </td> </td> </td> </td> / tr>
SQS의 일반 데이터 <td> <td> 없음 </td> 없음 </td> </td> / tr>
</table>

<table>
<tr><td>Data source</td><td>Source type</td><td>Description</td><td>CIM compliance</td><td>ITSI compliance</td></tr>

<tr><td rowspan=2>Config</td><td>aws:config</td><td>Configuration snapshots and historical configuration data from the AWS Config service.</td><td>Change Analysis</td><td rowspan=2>None</td></tr>
<tr><td>aws:config:notification</td><td>Configuration change notifications from the AWS Config service.</td><td>Change Analysis</td></tr>
<tr><td>Description</td><td>aws:description</td><td>Descriptions of your AWS EC2 instances, reserved instances, and EBS snapshots, used to improve dashboard readability.</td><td>None</td><td>Virtualization</td></tr>
<tr><td>Config Rules</td><td>aws:config:rule</td><td>Compliance details, compliance summary, and evaluation status of your AWS Config Rules.</td><td>Inventory</td><td>None</td></tr>
<tr><td>Inspector</td><td>aws:inspector</td><td>Assessment Runs and Findings data from the Amazon Inspector service.</td><td>Inventory, Alerts</td><td>None</td></tr>
<tr><td>CloudTrail</td><td>aws:cloudtrail</td><td>AWS API call history from the AWS CloudTrail service.</td><td>Change Analysis</td><td>None</td></tr>
<tr><td rowspan=2>CloudWatch Logs</td><td>aws:cloudwatchlogs</td><td>Data from the CloudWatch Logs service.</td><td>None</td><td rowspan=2>None</td></tr>
<tr><td>aws:cloudwatchlogs:vpcflow</td><td>VPC flow logs from the CloudWatch Logs service.</td><td>Network Traffic</td></tr>
<tr><td>CloudWatch</td><td>aws:cloudwatch</td><td>Performance and billing metrics from the AWS CloudWatch service.</td><td>Performance, Databases</td><td>Virtualization</td></tr>
<tr><td rowspan=2>Billing</td><td>aws:billing</td><td>Billing reports that you have configured in AWS.</td><td rowspan=2>None</td><td rowspan=2>None</td></tr>
<tr><td>aws:billing:cur</td><td>Cost and Usage Reports that you have configured in AWS</td></tr>
<tr><td rowspan=5>S3</td><td>aws:s3</td><td>Generic log data from your S3 buckets.</td><td rowspan=5>None</td><td rowspan=5>None</td></tr>
<tr><td>aws:s3:accesslogs</td><td>S3 access logs.</td></tr>
<tr><td>aws:cloudfront:accesslogs</td><td>CloudFront access logs.</td></tr>
<tr><td>aws:elb:accesslogs</td><td>ELB access logs.</td></tr>
<tr><td>aws:cloudtrail</td><td>Cloudtrail data</td></tr>
<tr><td>Kinesis</td><td>aws:kinesis</td><td>Data from Kinesis streams.</td><td>None</td><td>None</td></tr>
<tr><td>SQS</td><td>aws:sqs</td><td>Generic data from SQS.</td><td>None</td><td>None</td></tr>
</table>

특정 AWS 소스 유형에 사용할 입력 유형을 결정하려면 [source type-input type mapping matrix](http://docs.splunk.com/Documentation/AddOns/released/AWS/ConfigureInputs#Source_type-input_type_mapping)을 참조

문제 해결에 도움이되는 내부 로그에 대한 추가 소스 유형은 [Troubleshoot the Splunk Add-on for AWS](http://docs.splunk.com/Documentation/AddOns/released/AWS/Troubleshooting)을 참조

## AWS 용 Splunk 애드온 릴리스 노트

Amazon Web Services 용 Splunk 애드온 버전 4.5.0이 2018 년 3 월 22 일에 릴리스되었습니다.

### 호환성

Amazon Web Services 용 Splunk 애드온 버전 4.5.0은 다음 소프트웨어, CIM 버전 및 플랫폼과 호환됩니다.

| Splunk 플랫폼 버전 6.5 이상 |
|:-:|:-:-|
| CIM | 4.3 이상 |
| 데이터 수집을 지원하는 OS | 플랫폼 독립적 |
| 공급 업체 제품 | Amazon Web Services CloudTrail, CloudWatch, CloudWatch 로그, 구성, 구성 규칙, 관리자, Kinesis, S3, VPC 플로우 로그, 청구 서비스, SQS 및 SNS |

### 새로운 기능

AWS 버전 용 Splunk 애드온 버전 4.5.0에는 다음과 같은 새 기능 및 변경된 기능이 포함되어 있습니다.

- 비용 및 사용 보고서 데이터를 수집하기위한 청구 입력 구성 지원 (소스 유형 :`aws : billing : cur`).

### 수정 된 문제

Amazon Web Services 용 Splunk 애드온 버전 4.5.0은 다음과 같은 문제점을 수정합니다.

| 해결 된 날짜 | 발행 번호 | 설명 |
|:--|:--|:--|
| 2018-01-22 | ADDON-15918 | AWS TA가 경로 ARN의 "/"를 사용하여 역할 ARN을 검증 할 수 없습니다.
| 2018-01-22 | ADDON-16435 | AWS - SQS 기반 S3를 사용하여 CloudTrail에 연결하는 중에 오류가 발생했습니다 - EU-WEST-1 |

### 알려진 문제

Amazon Web Services 용 Splunk 애드온 버전 4.5.0에는 다음과 같은 알려진 문제점이 있습니다.

| 해결 된 날짜 | 발행 번호 | 설명 |
|:--|: --|: -- - |
| 2018-02-27 | ADDON-17277 | ELB / S3 액세스 로그의 라인 / 이벤트 강제 적용 |
| 2018-02-19 | ADDON-17158 | 다중 입력 텍스트 상자의 스타일이 올바르지 않습니다.
| 2018-02-19 | ADDON-17157 | 사용자 정의 페이지의 헤더보기가 기본 NightLight 스타일과 일치하지 않습니다.
| 2018-02-13 | ADDON-17132 | 입력 페이지 레이아웃 작성 / 편집이 손상되었습니다. |
| 2018-02-13 | ADDON-17135 | 드롭 다운에 자리 표시 자 도구 설명이 누락되었습니다.

### 타사 소프트웨어 속성

Amazon Web Services 용 Splunk 애드온 버전 4.5.0에는 다음과 같은 타사 라이브러리가 통합되어 있습니다.

부트 스트랩
boto - AWS for Python
boto3
보 토코 어
dateutils
docutils
jmespath
jqBootstrapValidation
jquery-cookie
Httplib2
원격 -PDB
SortedContainers
선택 2
urllib3

## AWS 용 Splunk 애드온의 출시 내역

### 최신 릴리스

Amazon Web Services 용 Splunk 애드온의 최신 버전은 4.5.0 버전입니다. 이 최신 버전의 릴리스 정보는 AWS 용 Splunk 애드온 릴리스 노트를 참조하십시오.

### 버전 4.4.0

Amazon Web Services 용 Splunk 애드온 버전 4.4.0은 다음 소프트웨어, CIM 버전 및 플랫폼과 호환됩니다.

| Splunk 플랫폼 버전| 6.5 이상 |
|:--:|:--|
| CIM | 4.3 이상 |
| 플랫폼 | 플랫폼 독립적 |
공급 업체 제품 | Amazon Web Services CloudTrail, CloudWatch, CloudWatch 로그, 구성, 구성 규칙, 관리자, Kinesis, S3, VPC 플로우 로그, 청구 서비스, SQS 및 SNS |

### 새로운 기능 (4.4.0)

AWS 버전 용 Splunk 애드온 버전 4.4.0에는 다음과 같은 새 기능 및 변경된 기능이 포함되어 있습니다.

- AWS 4.4.0 용 Splunk 애드온은 AWS 5.1.0 용 Splunk App에서만 호환됩니다. 이전 버전의 AWS 용 Splunk App는 지원되지 않습니다.
- 사용 편의성과보다 간소화 된 구성 워크 플로를 위해 최적화 된 웹 UI
  - 새 입력 만들기 메뉴가 수집 할 데이터 유형별로 구성된 모든 메뉴 옵션으로 다시 디자인되었습니다.
  - Generic S3 및 Incremental S3 입력 유형에 대해 두 개의 개별 구성 페이지를 사용할 수 있습니다. 이전에는 두 가지 입력 유형이 하나의 구성 페이지에서 구성되었습니다.
  - 이제 입력 구성 필드가 웹 UI의 AWS 입력 구성, Splunk 관련 구성 및 고급 설정 섹션으로 그룹화됩니다.
  - CloudWatch 및 Config 입력 유형에 맞게 재 설계된 입력 구성 UI를 사용하면 한 번에 여러 입력을 작성할 수 있습니다.
- 시스템 기본 임시 폴더가 충분한 공간을 제공하지 않을 때 다운로드 한 세부 청구서 보고서 .zip 파일을 임시 저장하기 위해 기본이 아닌 폴더를 지정할 수있는 새로운 Temp Folder 설정을 청구 입력 유형 구성에 추가했습니다.
- 이제 SQS 기반 S3 입력을 지원되는 AWS 로그 유형 외에도 일반 텍스트로 비 AWS 사용자 정의 로그를 색인하도록 구성 할 수 있습니다.
- SQS 기반 S3 입력 유형은 이제 CloudTrail 및 Config SQS 알림을 지원합니다.
- SQS, 구성 규칙 및 Inspector 입력 유형에서 역할이 지원된다고 가정합니다.
- 설명 입력 유형이 이제 iam_users 서비스를 지원합니다.

### 업그레이드

버전 4.3 이하에서 업그레이드하려면 AWS 사용자에게 'ec2 : RunInstances` API 작업 사용 권한이 부여되어야하며 배포에 따라 다음 API 작업이 필요합니다.

| API 작업 | 설명 |
|:--:|:--|
| ec2 : DescribeImages | 사용자가 AMI를보고 선택할 수 있습니다.
| ec2 : DescribeVpcs | 사용 가능한 EC2-Classic 및 VPC (Virtual Private Cloud) 네트워크 옵션을 볼 수 있습니다. 이 API 작업은 VPC로 시작하지 않는 경우에도 필요합니다.
| ec2 : DescribeSubnets | VPC로 시작할 때 사용자가 선택한 VPC에 대해 사용 가능한 모든 서브넷을 볼 수 있습니다.
| ec2 : DescribeSecurityGroups | 사용자가 마법사의 보안 그룹 페이지를 볼 수 있습니다. 사용자가 기존 보안 그룹을 선택할 수 있습니다.
| ec2 : DescribeKeyPairs 또는 ec2 : CreateKeyPair | 사용자가 기존 키 쌍을 선택하거나 새 키 쌍을 작성할 수 있습니다.

AWS 권한을 구성하는 방법에 대한 자세한 내용은 [설명 권한 구성](http://docs.splunk.com/Documentation/AddOns/released/AWS/ConfigureAWSpermissions)을 참조하십시오.

DescribeImages 함수에 대한 자세한 내용은 AWS 설명서를 참조하십시오. <https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeImages.html>.

### 수정 된 문제 (4.4.0)

Amazon Web Services 용 Splunk 애드온 버전 4.4.0은 다음과 같은 문제점을 수정합니다.

| 해결 된 날짜 | 발행 번호 | 설명 |
|:--:|:--:|:--|
| 2017-08-03 | ADDON-14890 | 부가 기능은 Kinesis 스트림 드롭 다운을 20 개 항목으로 절단합니다.
| 2017-07-27 | ADDON-12700 | 계정 페이지의 페이지 매김 문제점 |
| 2017-07-11 | ADDON-11974 | 추가 기능에서 일부 기본 구성을 사용하여 CloudWatch 데이터를 가져올 수 없습니다.
| 2017-05-25 | ADDON-13282 | UI의 설명 간격을 두 번 이상 변경할 수 없습니다.

### 알려진 문제 (4.4.0)

Amazon Web Services 용 Splunk 애드온 버전 4.4.0에는 다음과 같은 알려진 문제점이 있습니다.

<table>
<tr><td> <td> <td> </td> </td> </td>
AWS TA와 * nix TA는 eventgen.conf에 대한 스펙 파일이 없기 때문에 클러스터 번들 유효성 검증 오류가 발생합니다. <tr> <td> 2018-03-28 <td> ADDON-17571 </td> 클러스터링 된 인덱스 페이지 관리 Splunk Cloud |

해결 방법 :
이 버그로 인해 자체적으로 색인을 생성 할 수없는 Splunk Cloud 고객은 새로운 색인을 작성해야 할 경우 지원 사례를 제출해야합니다. </td> </tr>
<td> ADDON-17277 </td> <td> ELB / S3 액세스 로그에 대한 줄 / 이벤트 강제 적용 </td> </tr> <td> 2018-02-27 </td>
<td> 2018-01-09 </td> <td> ADDON-16538 </td> <td> UI에서 govcloud에 대한 AWS TA Kinesis 입력을 만들 수 없음

해결 방법 :
버전 4.4.0이 출시 된 후 AWS는 키네시 스 스트림에 대한 govcloud 지원을 추가했습니다. 그러나 AWS TA는 UI를 통해 사용자 입력을 허용하지 않습니다. 대신 aws_kinesis_tasks.conf에서 수동으로 Kinesis 입력을 구성 할 수 있습니다. </td> </tr>
kinesis 및 cloudwatch 입력이 HEC를 통해 대량의 데이터를 전송할 때 HEC는 유입 파이프 라인을 차단하여 차단 파이프 라인을 차단할 수 있습니다. 비 HEC 입력.

해결 방법 :
aws_kinesis.conf 및 / 또는 aws_cloudwatch.conf의 [global_settings] 스탠자에서 use_hec = false를 설정하십시오. </td> </tr>
<td> 2017-12-20 </td> <td> ADDON-16435 </td> <td> AWS - SQS 기반 S3 - EU-WEST-1을 사용하여 CloudTrail에 연결하는 중에 오류가 발생했습니다. </ td > </tr>
<td> 2017-09-21 <td> ADDON-15918 </td> <td> AWS TA는 </td> </tr> 경로에서 "/"를 사용하여 역할 ARN의 유효성을 확인할 수 없습니다.
<trd> <td> 2017-09-03 </td> <td> ADDON-15718 </td> <td> 두 개 이상의 지역이있는 경우 설명에 중복 된 구름 꼭대기 데이터 </td> </tr>
</td> </td> </td> </td> </td> Kinesis 스트림을 다시 가져올 때 Kinesis 스트림 데이터를 가져 오는 것을 중지합니다. <trd> <td> 2017-09-01 </td>
<td> 2017-08-22 </td> <td> ADDON-15603 </td> <td> 사용자는 사용중인 계정을 삭제할 수 있습니다. </td> </tr>
<td> 2017-08-19 <td> ADDON-15578 </td> <td> Windows에서 인덱싱 속도가 데이터 수집을 따라 잡지 못하는 경우 CloudWatch 및 증분 S3 로그를 로테이션하지 못함 </td> td> </tr>
<td> 2017-07-25 </td> <td> ADDON-15371 </td> <td> 추가 기능은 액세스 로그에서 UTF가 아닌 필드를 지원해야합니다. </td> </tr>
<td> 2017-03-29 <td> ADDON-14287 </td> <td> EC2 인스턴스에 첨부 된 IAM 역할을 바꾸면 이전 IAM 역할을 사용하는 입력이 수집 중지됩니다. 데이터. </td> </tr>
</table>

### 타사 소프트웨어 속성 (4.4.0)

Amazon Web Services 용 Splunk 애드온 버전 4.4.0에는 다음과 같은 타사 라이브러리가 통합되어 있습니다.

- 부트 스트랩
- boto - AWS for Python
- boto3
- botocore
- dateutils
- docutils
- jmespath
- jqBootstrapValidation
- jquery-cookie
- Httplib2
- remote-pdb
- SortedContainers
- select2
- urllib3

## AWS 용 Splunk 애드온의 설치 및 구성 개요

AWS 용 Splunk 애드온의 설치 및 구성 개요
이 애드온을 지원되는 플랫폼에 설치 및 구성하려면 다음 단계를 따르십시오.

1. AWS 계정 및 서비스를 구성하거나 기존 구성을 확인하십시오.
2. ION 권한이있는 계정 또는 EC2 역할을 구성하여 추가 기능에서 필요로하는 역할과 일치시킵니다.
3. 애드온을 설치합니다.
4. 데이터 수집 노드에서 추가 기능을 사용하여 데이터를 수집하는 데 사용할 AWS 계정을 구성합니다.
5. 입력을 구성하여 AWS 데이터를 Splunk 플랫폼으로 가져옵니다.
