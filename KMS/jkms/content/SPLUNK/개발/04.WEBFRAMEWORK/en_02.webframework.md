# Use the Splunk Web Framework

The Splunk Web Framework provides tools for you to develop dashboards and visualizations for Splunk apps. Splunk's extensible markup language, Simple XML, is the underlying source code for the dashboards created using the built-in Dashboard Editor. For more about working with the Dashboard Editor and Simple XML, see the [Dashboards and Visualizations](http://docs.splunk.com/Documentation/Splunk/latest/Viz) manual in the Splunk Enterprise documentation.

If you are a developer who wants to further customize dashboards and apps in a familiar web developer environment to programmatically interact with Splunk, use these tools that work with SplunkJS Stack. SplunkJS Stack is the web stack of JavaScript and JavaScript libraries that contains prebuilt components for searches and visualizations.

- Simple XML extensions
    Use extensions to modify the appearance and behavior of a dashboard. Extensions are CSS and JavaScript files that you add to your app then reference from the dashboard's Simple XML code.
- HTML dashboards
    For full control over the appearance and behavior of an app, convert any dashboard from Simple XML to HTML, which lets you start with autogenerated code that you can modify. Use your favorite development tools to work with CSS, HTML, and JavaScript code to build rich, interactive experiences.

Learn more about these key features to develop custom Splunk apps and dashboards:

- Search managers correspond to your Splunk search jobs, saved reports, and post-process searches.
- Splunk views correspond to Simple XML visualizations, and are used to visualize data, accept form input, and control searches.
- Bind data using tokens provides a handy mechanism for you to bind values together from searches and views to keep them in sync.
- Drilldown actions let you customize the drilldown behavior when users click on views.
- Splunk dashboard styles are used by HTML dashboards for layout.
- Navigation lets you add links and menus to your app's navigation bar.

## About SplunkJS Stack

About SplunkJS Stack

The Splunk Web Framework includes a SplunkJS Stack component for web developers who want to create Splunk apps in a familiar JavaScript environment. This web stack includes a number of tools to help you create Splunk apps:

    Libraries for Splunk views and search managers for working with searches and interacting with Splunk data.
    Backbone.js provides an MVC framework as a structure for your code.
    RequireJS manages dependencies.
    jQuery helps manage the document object model (DOM).

So using SplunkJS Stack along with your favorite development tools, you can build rich interactive apps to access and manipulate Splunk data. You can also add third-party visualizations to your apps, as well as create your own reusable views.
 
Create Splunk apps to run in Splunk Enterprise

Use SplunkJS Stack to develop Splunk apps, which are apps that appear in Splunk Web in Splunk Enterprise, relying on Splunk's app server to interact with splunkd to render data into HTML pages. And with Splunk's built-in navigation bars and headers, you can give your apps the same look and feel as Splunk.

To get started with SplunkJS Stack to create Splunk apps:

    See Create an app to dive right in.
    See the Tutorials for step-by-step examples showing different features of the Splunk Web Framework.
    See the Code Examples to see full code examples of Simple XML extensions and HTML dashboards.

 
Add SplunkJS Stack to your own web apps

Add the SplunkJS Stack libraries to your own web apps to use the Web Framework search managers and Splunk views to interact with Splunk and display data. Download SplunkJS Stack here.

To learn more, see the following topics:

    Use SplunkJS Stack in your own web apps
    Load libraries and configure SplunkJS
    Communicate with the Splunk server
    Authenticate users
    How to add Splunk to your own web apps using SplunkJS Stack
    Code examples of SplunkJS Stack for apps outside Splunk Web

 
Overview of SplunkJS Stack search managers and views

Just as Simple XML provides a collection of visualization elements and forms, the SplunkJS Stack component of the Splunk Web Framework provides a collection of search managers and views to access with JavaScript. So, when you convert a Simple XML dashboard to HTML, all of the Simple XML visualizations are converted into the SplunkJS Stack equivalent.
Search managers

In SplunkJS Stack, searches are defined and managed separately from the visualizations that display their data by using a search manager. A search manager encapsulates the search job, which includes the search query and search properties, and handles the operation and lifetime of the search. The type of search manager depends on the type of search:

    SearchManager corresponds to an inline search.
    SavedSearchManager corresponds to a saved report.
    PostProcessManager corresponds to a post-process search.

Each search manager has a unique ID. To link a search to a particular visualization, set the visualization's managerid property to the search's id value.

Here's an example of how SplunkJS Stack defines a search manager in JavaScript:

    var mysearch = new SearchManager({
        id: "search1",
        preview: true,
        cache: true,
        status_buckets: 300,
        search: "index=_internal | head 1000 | stats count by sourcetype"
    });

For more about how to work with search managers, see Add searches with search managers. For reference information about search managers and their properties, see the Splunk Web Framework Component Reference.
Views

In SplunkJS Stack, visualizations are defined as views with properties. If a search is bound to the view, the managerid property indicates the search to use.

Here's an example of how SplunkJS Stack defines a chart view in JavaScript:

    var mychart = new ChartView ({
        id: "chart1",
        managerid: "search1",
        type: "bar",
        el: $("#mychart")
    }).render();

For more about how to work with views, see Display data with Splunk views. For reference information about views and their properties, see the Splunk Web Framework Component Reference.
Converting visualizations to views in HTML dashboards

In a Simple XML dashboard, each visualization is displayed within a panel that provides additional features such as a timestamp, and buttons to open the search, export results, and open the search job inspector:

Panel implementation

When a Simple XML dashboard is converted to HTML, each visualization is converted into a SplunkJS Stack view, with a wrapper around the view that includes this panel implementation. You can use any view directly without the wrapper if you don't want the extra panel implementation. In addition, there are several SplunkJS Stack views that are not available in Simple XML, but you can add them to your HTML dashboards.

The following table shows the visualization, the name of the Simple XML wrapper that is created when the visualization is converted to HTML, and the name of the SplunkJS Stack view. Note that some of the Simple XML wrappers don't have corresponding SplunkJS Stack views because they aren't necessary (for example, inline HTML is just converted to HTML―no view needed), and some views do not have wrappers because those views aren't displayed within panels (such as the header).
Visualization
	
Simple XML Wrapper
	
SplunkJS Stack View
Chart	ChartElement	ChartView
Checkbox	not available in Simple XML	CheckboxView
Checkbox group	CheckboxGroupInput	CheckboxGroupView
Data template	not available in Simple XML	DataTemplateView
Dropdown list	DropdownInput	DropdownView
Event table	EventElement	EventsViewerView
Layout	no wrapper	LayoutView
Inline HTML	HtmlElement	not necessary
Link list	LinkListInput	LinklistView
List	ListElement	not necessary
Map	MapElement	SplunkMapView
Multidropdown list	MultiSelectInput	MultiDropdownView
Radio buttons	RadioGroupInput	RadioGroupView
Result table	TableElement	TableView
Search control	not available in Simple XML	SearchControlsView
Searchbar	not available in Simple XML	SearchbarView
Single	SingleElement	SingleView
Submit button	SubmitButton	not necessary
Text box	TextInput	TextInputView
Time-range picker	TimeRangeInput	TimeRangeView
Timeline	not available in Simple XML	TimelineView

Whether you use a wrapper or view (for example, ChartElement or ChartView), you can set and retrieve the same properties the same way. For reference information about these views and their properties, see the Splunk Web Framework Component Reference.

## Load libraries, components, and dependencies



SplunkJS Stack uses the Asynchronous Module Definition (AMD) format with RequireJS to load dependencies.

    If you're working with Simple XML, you'll need to manually add requirements for the SplunkJS Stack libraries and components to instantiate Splunk views and search managers.
    If you're working with converted HTML dashboards, the autogenerated code already includes the necessary require statements, and most libraries are already loaded for you. However, you can load additional libraries as needed. For details about the autogenerated HTML, see Section 3: Library requirements.

To use SplunkJS Stack, add the "splunkjs/mvc/simplexml/ready!" loader script to your require statement as follows:

require(["splunkjs/mvc/simplexml/ready!"], function() { . . . });

This script loads the SplunkJS Stack libraries, then returns after this has been completed (although the script does not return a value).

To instantiate components such as views and search managers, add requirements for each of the individual components as follows:

require([
    componentpath_1,
    componentpath_2,
    componentpath_n,
    "splunkjs/mvc/simplexml/ready!"
], function() { . . . });

For each component's library path, see the Splunk Web Framework Component Reference.

Then, add variables for the returned objects as function arguments in the same order as they are declared in requirements. Because the ready! loader script does not return a value, you can add this statement at the end of the requirements, and omit it from the function arguments:

require([
    componentpath_1,
    componentpath_2,
    componentpath_n,
    "splunkjs/mvc/simplexml/ready!"
], function(
    object_1,
    object_2,
    object_n,
) { . . . });

Examples

This example shows how to load a chart and a search manager.

require([
    "splunkjs/mvc/searchmanager",
    "splunkjs/mvc/chartview",
    "splunkjs/mvc/simplexml/ready!"
], function(
    SearchManager,
    ChartView
) {

    // Create search managers
    new SearchManager({
        id: "search1",
        earliest_time: "-24h@h",
        latest_time: "now",
        search: "index=_internal | stats count by sourcetype"
    });


    // Instantiate views
    new ChartView({
        id: "chart1",
        managerid: "search1",
        "type": "line",
        el: $("#chart1")
    }).render();

});

To work with an instance of a Splunk view or search manager that has already been instantiated, you don't need to load the individual components, but you do need to add the "splunkjs/mvc" library requirement to be able to access the components. This next example shows how to modify the properties of an EventsViewer view that was already instantiated as an Events panel:

require([
    "splunkjs/mvc",
    "splunkjs/mvc/simplexml/ready!"
], function(mvc) {

    // Get the Events table
    var myEventsTable = mvc.Components.get('myevents');

    // Programmatically change a property in the Events table
    myEventsTable.getVisualization(function(eventsView) {
        eventsView.settings.set("count", 2);
    });
});

## Modify dashboards using Simple XML extensions

You can add custom functionality to dashboards by using Simple XML extensions, which are cascading style sheets and JavaScript files that you add to your app. You can modify layout, add new visualizations, and customize behaviors for a dashboard. By using extensions, the original dashboard is still available, and you can continue to use the built-in Dashboard Editor and PDF generation features.
To add extensions

Add an /appserver/static/ directory to your app under $SPLUNK_HOME/etc/apps/app_name/ for static CSS and JavaScript resource files. This directory is not created by default when you create an app using the "barebones" template. Restart Splunk Enterprise after you add this directory to your app.

Then, to add extensions to Simple XML:

    Edit the dashboard source code.
    Add cascading style sheets.
    Create JavaScript extensions.

Edit the dashboard source code

To use extensions, you'll need to edit the Simple XML source code of the dashboard:

    To edit the Simple XML source code in Splunk Enterprise, from the dashboard click Edit, and then click Source.
    To edit the Simple XML source code directly, open the source files in a text editor. The file location depends on the permissions you set for the dashboard:
        Private: $SPLUNK_HOME/etc/apps/users/admin/app_name/local/data/ui/views/dashboard_name.xml
        Shared in app: $SPLUNK_HOME/etc/apps/app_name/local/data/ui/views/dashboard_name.xml

Add references to your CSS and JavaScript extension files in your dashboard's source code as follows:

<dashboard script="filename.js" stylesheet="filename.css">

To access a visualization or form input from the dashboard using JavaScript, you must first add a component ID to the visualization or form input in the dashboard's source code, and then use this ID in your JavaScript.

Add an ID to the Simple XML source code using this format, where component corresponds to the visualization, such a chart, table, map, text input, and so forth:

    <component id="component_id">

For more about visualizations and form inputs in Simple XML, see Simple XML Reference in the Dashboards and Visualizations manual.
Add cascading style sheets

To use cascading style sheets, add the CSS files to your app's $SPLUNK_HOME/etc/apps/app_name/appserver/static/ directory.
Create JavaScript extensions

JavaScript extensions for Simple XML are based on SplunkJS Stack, allowing you to create and modify the visualizations in a Simple XML dashboard by working with their view and search manager components in JavaScript. For more about SplunkJS Stack, see Overview of SplunkJS Stack search managers and views.

To work with the SplunkJS Stack libraries, you'll need to use the "splunkjs/mvc/simplexml/ready!" script, which loads the required components and dependencies. For more about loading SplunkJS Stack components, see Load libraries, components, and dependencies.

To use JavaScript to modify your dashboard:

    Create JavaScript files in your app's $SPLUNK_HOME/etc/apps/app_name/appserver/static/ directory.
    Add the ready! loader script to your require statement to load the SplunkJS Stack libraries.

    require([
        "splunkjs/mvc/simplexml/ready!"
    ], function() {

        . . .

    });

    Because the ready! statement does not return a value, you can call it at the end of the requirements and omit the argument from the function.
    To access an existing component, load the "splunkjs/mvc" library, and use the splunkjs.mvc.Components.get(), settings.get(), and settings.set() methods as follows:

    require([
        "splunkjs/mvc",
        "splunkjs/mvc/simplexml/ready!"
    ], function(mvc) {

        . . . 
        
        // Get the component using the ID you added to the Simple XML tag
        var componentInstance = splunkjs.mvc.Components.get("component_id");


        // Get a property
        componentInstance.settings.get("property_name");


        // Set a property
        componentInstance.settings.set("property_name", "new_value");

        . . . 

    });

    To instantiate a visualization or form input using JavaScript, you'll need to instantiate the corresponding Splunk view and optionally a search manager. Add the component libraries to your require statement and instantiate the components using the following format:

    require([
        "splunkjs/mvc/component",
        "splunkjs/mvc/simplexml/ready!"
    ], function(component) {

        // Instantiate the component
        new componentInstance({
            id: component_id,
            managerid: search_manager_id, // optional
            el: $("#element_location_id")
        }).render();

    });

    Important  You must position function arguments in the same order as they appear in the require statement. Otherwise, if you do not maintain the same order, you will not see an error but the dashboard will not work. The "splunkjs/mvc/simplexml/ready!" statement does not return a value, so you can call it at the end of the requirements and omit the argument from the function.

    /* The order of requirements and function arguments must match */

    require([
        "splunkjs/mvc/component_A",
        "splunkjs/mvc/component_B",
        "splunkjs/mvc/simplexml/ready!"
    ], function(
        component_A,
        component_B
    ) {

        . . . 

    });

Next steps:

    To learn about working with search managers, see Add searches with search managers.
    To learn about working with views, see Display data with Splunk views.
    For the library path, properties, and code examples for each component, see the Splunk Web Framework Component Reference.

Example

Here's an example of an extension to a dashboard with an events table, showing how to modify the events table properties and respond to click events.
Example code for the dashboard

The code below is for a dashboard that was created using the Dashboard Editor. The source code was modified by adding a reference to the example.js extension file, adding an HTML panel that displays a message, and adding an ID to the <event> tag.

<dashboard script="example.js">
  <label>Example</label>
  <description>A Simple XML dashboard using extensions</description>
  <row>
    <panel>
      <html>
        Click a row in the table to trigger a click event
        <br/><br/>
        <div id="message"/>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <title>Events table</title>
      <event id="myevents">
        <title>Top 5 results from index = _internal</title>
        <search>
          <query>index=_internal | head 5</query>
          <earliest>0</earliest>
        </search>
        <option name="list.drilldown">outer</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">outer</option>
        <option name="rowNumbers">0</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="wrap">true</option>
        <option name="dataOverlayMode">none</option>
        <option name="count">2</option>
        <fields>["host","source","sourcetype"]</fields>
      </event>
    </panel>
  </row>
</dashboard>

Example code for the JavaScript extension

This JavaScript example shows how to access the events table using the myevents ID, change the "count" property, and respond to a click event on the events table.

/* example.js */

require([
    "splunkjs/mvc",
    "splunkjs/mvc/simplexml/ready!"
], function(mvc) {

    // Get the Events table
    var myEventsTable = mvc.Components.get('myevents');

    // Programmatically change a property in the Events table
    myEventsTable.getVisualization(function(eventsView) {
        eventsView.settings.set("count", 2);
    });

    // Respond to a click event
    myEventsTable.on("click", function(e) {
        // Prevent drilldown from redirecting away from the page
        e.preventDefault();

        // Console feedback
        console.log("Click!");

        // Use jQuery to fill in the text in the HTML's <div> tag
        $('#message').text("Clicked!");
    });

});

For end-to-end code examples for Simple XML extensions that show how to instantiate different Splunk views and search managers, use tokens, modify drilldown actions, respond to events and more, see Code examples using the Splunk Web Framework.

## Convert Simple XML dashboards to HTML



You can leverage the tools, flexibility, and power of the Splunk Web Framework by converting existing Simple XML dashboards into HTML. By working directly in HTML and JavaScript, you'll be able to customize your dashboards beyond what you can do in Simple XML:

    Change the layout of visualizations.
    Add formatting and custom CSS to your dashboards, add images, and anything else you can do in HTML.
    Add and customize Splunk visualizations.
    Customize drilldown and other interactive behaviors.
    Integrate with third-party visualizations.

Many of these customizations can also be done using Simple XML extensions. However, HTML dashboards are especially useful when you want to:

    Create a layout that is more advanced than the panel- and row-based layout used by the Dashboard Editor.
    Use advanced input controls, such as a slider input selector.
    Use custom REST endpoints for server-side logic.

After you convert a dashboard to HTML, it will be listed with your other dashboards and you can continue to manage it using Splunk Web (for example, to change permissions). However, be aware that when you convert a Splunk dashboard to HTML, the dashboard will lose these built-in features:

    Interactive editing using the built-in Dashboard Editor
    Integrated PDF generation and scheduled delivery

    Note  HTML dashboards are specific to the version of Splunk on which they are generated. Converted dashboards might not work if you upgrade Splunk later.

Learn more:

    How Simple XML gets converted to HTML
    To convert a Simple XML dashboard to HTML
    To edit an HTML dashboard

 
How Simple XML gets converted to HTML

A Simple XML dashboard consists of different types of visualizations: elements (such as tables, charts, maps, event viewers, and single views) and form inputs (such as radio buttons, text boxes, dropdowns, and time-range pickers).

When you convert Simple XML to HTML, each Simple XML visualization is converted into a SplunkJS Stack-equivalent Splunk view, with a wrapper around each view that includes a panel implementation, and a search manager if that visualization is bound to a search. In the autogenerated HTML, each visualization's layout, definition, and related searches are separated:

    The layout is converted into Splunk's styles indicating how to place and format items on the page, similar to Bootstrap's grid system.
    The definition of each visualization is converted into JavaScript. The code for each visualization includes its properties and an auto-generated ID.
    Any search that is specified in a visualization is extracted and represented in JavaScript. The code for each search includes its properties and an auto-generated ID.

Here's a simple example that demonstrates the conversion of a visualization from XML to HTML. Let's start with a search that displays a result table:

index=_internal | head 5 | table host, source

When you save this search as a dashboard panel, the XML that is created for the table and title looks like this:

...
<row>
    <table>
        <title>Result table</title>
        <searchString>index=_internal | head 5 | table host, source</searchString>
    </table>
</row>
...

When converted to HTML, a layout is created that uses nested <div> tags to define a row containing a panel. The panel refers to the table's ID ("element1"), indicating that the table is displayed in that panel. The table's heading is also included in the panel. The HTML looks like this:

...
<div class="dashboard-row dashboard-row1">
    <div class="dashboard-cell" style="width: 100%;">
        <div class="dashboard-panel clearfix">
            <div class="panel-element-row">
                <!-- Display "element1" in this panel -->
                <div class="dashboard-element table" id="element1" style="width: 100%">
                    <div class="panel-head">
                        <h3>Result table</h3>
                    </div>
                    <div class="panel-body"></div>
                </div>
            </div>
        </div>
    </div>
</div>
...

The definition of the table and the search that powers it are defined separately in JavaScript. Just as the table ID connects the layout to the table, the search ID ("search1") also connects the table to its search via the table's managerid property. Here's the JavaScript:

...

var search1 = new SearchManager({
    "id": "search1",               // This is the search ID
    "status_buckets": 0,
    "earliest_time": "$earliest$",
    "search": "index=_internal | head 5 | table host, source",
    "latest_time": "$latest$",
    "cancelOnUnload": true,
    "app": utils.getCurrentApp(),
    "auto_cancel": 90,
    "preview": true
}, {tokens: true, tokenNamespace: "submitted"});

...

var element1 = new TableElement({
    "id": "element1",              // This is the table ID
    "managerid": "search1",        // This connects the table to the search
    "el": $('#element1')
}, {tokens: true}).render();

...

Without knowing much more than this, you can edit the HTML to make simple customizations. For example, you can add your own CSS, or change the layout (the default styles and how to use them are described in Splunk dashboard styles). But if you want to customize the way these visualizations behave and interact, you'll need to work with JavaScript and learn more about the SplunkJS Stack component of the Web Framework.
 
To convert a Simple XML dashboard to HTML

You need to have permission to be able to convert a dashboard, specifically a role that has the "edit_view_html" capability. For details, see About defining roles with capabilities.

    In Splunk Web, open the dashboard you want to convert.
    Click Edit and select Convert to HTML.
    Set the properties for the converted dashboard:

    Converting to HTML Dashboard
        To create an HTML version of the dashboard, click Create New. Or, to replace and write over the existing dashboard, click Replace Current.
            Note  Replacing the current dashboard makes the HTML version of the dashboard visible to users and hides the Simple XML version. You can revert to the Simple XML dashboard by deleting the HTML file. The file locations depend on the permissions (see below).
        Optionally, change the title, ID (the filename), description, and permissions.
    Click Convert Dashboard.

 
To edit an HTML dashboard

You can edit a converted HTML dashboard by by using the built-in Source Editor in Splunk Enterprise, or by opening the source file in a text editor of your choice.
Use the Source Editor

To use the Source Editor in Splunk Enterprise:

    In Splunk Web, find the dashboard you want to edit by clicking Settings, then User interface, then Views.
    Select the App context and Owner filters as appropriate to list your dashboards.
    Find your HTML dashboard in the list and click Edit, and then click Source to display the source code.

You can also click the Dashboards tab within any app to list dashboards.
Use your own text editor

To edit the source files for HTML dashboards in a text editor of your choice, you need access to source files on your Splunk instance. You might need to contact your Splunk administrator for permission and access.

The location of the HTML file depends on the permissions you chose for the dashboard:

    Private: $SPLUNK_HOME/etc/users/username/appname/local/data/ui/html
    Shared: $SPLUNK_HOME/etc/apps/appname/local/data/ui/html

The procedures throughout this documentation show the paths for shared permissions.

## Walkthrough of the HTML dashboard code



When you convert a Simple XML dashboard to HTML, code is autogenerated for the dashboard that contains HTML and JavaScript. This topic walks through each section of the autogenerated code for a converted dashboard and explains what it does.

First, create a dashboard to convert using the following search that displays a result table:

    In Splunk Web, from any app, run this search:

    index=_internal | head 5 | table host, source

    Click Save As > Dashboard Panel.
    Enter a Dashboard ID (such as "example"), click Save, then click View Dashboard.
    Click ..., then click Convert to HTML, then click Convert Dashboard.
    Click Edit HTML to view the autogenerated code.

Let's review the interesting parts of this code, broken down into these basic sections:

    Style sheets and URL prefix
    Layout
    Library requirements
    Tokens
    Search managers
    Header, footer, and dashboard editor
    Views
    Submit data and dashboard ready

Section 1: Style sheets and URL prefix

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>example HTML</title>
    <link rel="shortcut icon" href="{{SPLUNKWEB_URL_PREFIX}}/static/img/favicon.ico" />
        <link rel="stylesheet" type="text/css" href="/en-US/static/@387cc49a8ed8/css/build/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="/en-US/static/@387cc49a8ed8/css/build/pages/dashboard-simple-bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="all" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/search/dashboard.css" />
</head>

Here's the beginning of the HTML page:

    The <head> section links to style sheets for formatting and layout, including Bootstrap and Splunk's dashboard styles.
    A placeholder {{SPLUNKWEB_URL_PREFIX}} is used for the prefix of all internal URLs. When the dashboard is rendered, this placeholder is replaced with the correct URL for users, including their locale.

Here, you can insert links to your own style sheets, and insert a <style> section if you want to define page styles.
Section 2: Layout

<body class="simplexml preload locale-en">
<!-- 
BEGIN LAYOUT
This section contains the layout for the dashboard. Splunk uses proprietary
styles in <div> tags, similar to Bootstrap's grid system. 
-->
<header>
<a class="navSkip" href="#navSkip" tabindex="1">Screen reader users, click here to skip the navigation bar</a>
<div class="header splunk-header">
        <div id="placeholder-splunk-bar">
            <a href="{{SPLUNKWEB_URL_PREFIX}}/app/launcher/home" class="brand" title="splunk > listen to your data">splunk<strong>></strong></a>
        </div>
            <div id="placeholder-app-bar"></div>
</div>
<a id="navSkip"></a>
</header>
<div class="dashboard-body container-fluid main-section-body" data-role="main">
    <div class="dashboard-header clearfix">
        <h2>example HTML</h2>
    </div>


    <div id="row1" class="dashboard-row dashboard-row1">
        <div id="panel1" class="dashboard-cell" style="width: 100%;">
            <div class="dashboard-panel clearfix">
                
                <div class="panel-element-row">
                    <div id="element1" class="dashboard-element table" style="width: 100%">
                        <div class="panel-body"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 
END LAYOUT
-->

This section contains the layout for the dashboard panel, including the Splunk header (with the navigation bar) and footer.

The layout is created using Splunk's styles, similar to Bootstrap styles. Splunk uses nested <div> tags to create containers in a layout of rows, columns, and cells in a grid system. If you want to maintain Splunk's dashboard look and feel, learn more about using these styles in Splunk dashboard styles.

However, you don't have to use these styles or layout at all―you can format the page however you want. For example, let's say you just want to just display the table and heading. At a minimum, you need to associate the table ID with a tag on the page, so you could replace the entire section above with this:

<body class="simplexml preload">
<p id="element1" />

Section 3: Library requirements

<script src="{{SPLUNKWEB_URL_PREFIX}}/config?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/i18n.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/i18ncatalog?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/build/simplexml/index.js"></script>
<script type="text/javascript">
// <![CDATA[
// <![CDATA[

//
// LIBRARY REQUIREMENTS
//
// In the require function, we include the necessary libraries and modules for
// the HTML dashboard. Then, we pass variable names for these libraries and
// modules as function parameters, in order.
// 
// When you add libraries or modules, remember to retain this mapping order
// between the library or module and its function parameter. You can do this by
// adding to the end of these lists, as shown in the commented examples below.

require([
    "splunkjs/mvc",
    "splunkjs/mvc/utils",
    "splunkjs/mvc/tokenutils",
    "underscore",
    "jquery",
    "splunkjs/mvc/simplexml",
    "splunkjs/mvc/layoutview",
    "splunkjs/mvc/simplexml/dashboardview",
    "splunkjs/mvc/simplexml/dashboard/panelref",
    "splunkjs/mvc/simplexml/element/chart",
    "splunkjs/mvc/simplexml/element/event",
    "splunkjs/mvc/simplexml/element/html",
    "splunkjs/mvc/simplexml/element/list",
    "splunkjs/mvc/simplexml/element/map",
    "splunkjs/mvc/simplexml/element/single",
    "splunkjs/mvc/simplexml/element/table",
    "splunkjs/mvc/simpleform/formutils",
    "splunkjs/mvc/simplexml/eventhandler",
    "splunkjs/mvc/simplexml/searcheventhandler",
    "splunkjs/mvc/simpleform/input/dropdown",
    "splunkjs/mvc/simpleform/input/radiogroup",
    "splunkjs/mvc/simpleform/input/linklist",
    "splunkjs/mvc/simpleform/input/multiselect",
    "splunkjs/mvc/simpleform/input/checkboxgroup",
    "splunkjs/mvc/simpleform/input/text",
    "splunkjs/mvc/simpleform/input/timerange",
    "splunkjs/mvc/simpleform/input/submit",
    "splunkjs/mvc/searchmanager",
    "splunkjs/mvc/savedsearchmanager",
    "splunkjs/mvc/postprocessmanager",
    "splunkjs/mvc/simplexml/urltokenmodel"
    // Add comma-separated libraries and modules manually here, for example:
    // ..."splunkjs/mvc/simplexml/urltokenmodel",
    // "splunkjs/mvc/checkboxview"
    ],
    function(
        mvc,
        utils,
        TokenUtils,
        _,
        $,
        DashboardController,
        LayoutView,
        Dashboard,
        PanelRef,
        ChartElement,
        EventElement,
        HtmlElement,
        ListElement,
        MapElement,
        SingleElement,
        TableElement,
        FormUtils,
        EventHandler,
        SearchEventHandler,
        DropdownInput,
        RadioGroupInput,
        LinkListInput,
        MultiSelectInput,
        CheckboxGroupInput,
        TextInput,
        TimeRangeInput,
        SubmitButton,
        SearchManager,
        SavedSearchManager,
        PostProcessManager,
        UrlTokenModel

        // Add comma-separated parameter names here, for example: 
        // ...UrlTokenModel, 
        // CheckboxView
        ) {

        var pageLoading = true;

This section begins the JavaScript code, and loads the required JavaScript libraries and components.

The require statement specifies libraries for Simple XML and SplunkJS Stack components, and utilities such as Underscore and jQuery libraries. All of the Simple XML wrappers are required, too.

For the most part, you should leave this code as is, although you can require additional libraries as needed. If you want to add a SplunkJS Stack view to your page, you'll need to manually add it to the require section and also add a variable to the function as a parameter, without stepping on the existing code. Let's say you want to work with advanced token manipulation―you'll need to require the TokenForwarder library (the path is "splunkjs/mvc/tokenforwarder") as follows, separating new items with commas:

...

require([
    "splunkjs/mvc",
    "splunkjs/mvc/utils",
    "splunkjs/mvc/tokenutils",
    "underscore",
    "jquery",
    "splunkjs/mvc/simplexml",
    "splunkjs/mvc/layoutview",
    "splunkjs/mvc/simplexml/dashboardview",
    "splunkjs/mvc/simplexml/element/chart",
    "splunkjs/mvc/simplexml/element/event",
    "splunkjs/mvc/simplexml/element/html",
    "splunkjs/mvc/simplexml/element/list",
    "splunkjs/mvc/simplexml/element/map",
    "splunkjs/mvc/simplexml/element/single",
    "splunkjs/mvc/simplexml/element/table",
    "splunkjs/mvc/simpleform/formutils",
    "splunkjs/mvc/simpleform/input/dropdown",
    "splunkjs/mvc/simpleform/input/radiogroup",
    "splunkjs/mvc/simpleform/input/multiselect",
    "splunkjs/mvc/simpleform/input/checkboxgroup",
    "splunkjs/mvc/simpleform/input/text",
    "splunkjs/mvc/simpleform/input/timerange",
    "splunkjs/mvc/simpleform/input/submit",
    "splunkjs/mvc/searchmanager",
    "splunkjs/mvc/savedsearchmanager",
    "splunkjs/mvc/postprocessmanager",
    "splunkjs/mvc/simplexml/urltokenmodel",
    "splunkjs/mvc/tokenforwarder"  // Add the view manually
    ],
    function(
        mvc,
        utils,
        TokenUtils,
        _,
        $,
        DashboardController,
        LayoutView,
        Dashboard,
        ChartElement,
        EventElement,
        HtmlElement,
        ListElement,
        MapElement,
        SingleElement,
        TableElement,
        FormUtils,
        DropdownInput,
        RadioGroupInput,
        MultiSelectInput,
        CheckboxGroupInput,
        TextInput,
        TimeRangeInput,
        SubmitButton,
        SearchManager,
        SavedSearchManager,
        PostProcessManager,
        UrlTokenModel,
        TokenForwarder   // Add the parameter manually
) {
...

Section 4: Tokens

        // 
        // TOKENS
        //
        
        // Create token namespaces
        var urlTokenModel = new UrlTokenModel();
        mvc.Components.registerInstance('url', urlTokenModel);
        var defaultTokenModel = mvc.Components.getInstance('default', {create: true});
        var submittedTokenModel = mvc.Components.getInstance('submitted', {create: true});

        urlTokenModel.on('url:navigate', function() {
            defaultTokenModel.set(urlTokenModel.toJSON());
            if (!_.isEmpty(urlTokenModel.toJSON()) && !_.all(urlTokenModel.toJSON(), _.isUndefined)) {
                submitTokens();
            } else {
                submittedTokenModel.clear();
            }
        });

        // Initialize tokens
        defaultTokenModel.set(urlTokenModel.toJSON());

        function submitTokens() {
            // Copy the contents of the defaultTokenModel to the submittedTokenModel and urlTokenModel
            FormUtils.submitForm({ replaceState: pageLoading });
        }

        function setToken(name, value) {
            defaultTokenModel.set(name, value);
            submittedTokenModel.set(name, value);
        }

        function unsetToken(name) {
            defaultTokenModel.unset(name);
            submittedTokenModel.unset(name);
        }

This section sets up the token namespaces and token models for visualizations and searches.

    For those tokens that use the default token model, when a token value changes, the value is updated immediately.
    For those tokens that use the submitted token model, when a token value changes, the changed value is added to a queue and values are not updated until they are submitted.

You can specify which token model to use for individual visualizations and searches. But for the most part, you should leave the code in this section as is.

For more about tokens and how they're used, see Binding data with tokens.
Section 5: Search managers

        //
        // SEARCH MANAGERS
        //

        var search1 = new SearchManager({
            "id": "search1",
            "search": "index=_internal | head 5 | table host, source",
            "earliest_time": "$earliest$",
            "cancelOnUnload": true,
            "latest_time": "$latest$",
            "status_buckets": 0,
            "app": utils.getCurrentApp(),
            "auto_cancel": 90,
            "preview": true,
            "runWhenTimeIsUndefined": false
        }, {tokens: true, tokenNamespace: "submitted"});

Search managers are defined in this section, where you can customize and create new search managers.

    You can change the properties as needed. For example, you could change the latest time for the search as follows:

    "latest_time": "now",

    For a reference of the different types of search managers and the properties you can set, see the Splunk Web Framework Component Reference.
    You can change which token model to use. In the code above, the submitted token model is used, which means that the search does not run again until token value changes are submitted. If you wanted to use the default token model and run the search as soon as a token value changes, you could make the change like this:

    }, {tokens: true, tokenNamespace: "default"});

    Because the default model is "default" as the name implies, you don't even have to specify it explicitly:

    }, {tokens: true});

For more about adding search managers, see How to add search managers to an HTML dashboard.
Section 6: Layout and dashboard editor

        //
        // SPLUNK LAYOUT
        //

        $('header').remove();
        new LayoutView({"hideFooter": false, "hideSplunkBar": false, "hideAppBar": false, "hideChrome": false})
            .render()
            .getContainerElement()
            .appendChild($('.dashboard-body')[0]);


        //
        // DASHBOARD EDITOR
        //

        new Dashboard({
            id: 'dashboard',
            el: $('.dashboard-body'),
            showTitle: true,
            editable: true
        }, {tokens: true}).render();

This section defines the layout and dashboard views. There isn't much to customize here.
Section 7: Views

        //
        // VIEWS: VISUALIZATION ELEMENTS
        //

        var element1 = new TableElement({
            "id": "element1",
            "managerid": "search1",
            "el": $('#element1')
        }, {tokens: true, tokenNamespace: "submitted"}).render();


        //
        // VIEWS: FORM INPUTS
        //

        // This section is only included for forms

Any views (elements and form inputs) are defined here. (There are no form inputs in this example dashboard, but the placeholder notes where they would be placed.)

    You can change the properties as needed. For example, you could add this property to the table to specify how many results to display per page:

    "pageSize": 3,

    For a reference of the different types of properties you can set for each visualization, see the Splunk Web Framework Component Reference.
    You can change which token model to use (see Section 5: Search managers for more about the token model).

For more about adding views, see How to add a visualization to an HTML dashboard.
Section 8: Submit data and dashboard ready

        // Initialize time tokens to default
        if (!defaultTokenModel.has('earliest') && !defaultTokenModel.has('latest')) {
            defaultTokenModel.set({ earliest: '0', latest: '' });
        }

        submitTokens();


        //
        // DASHBOARD READY
        //

        DashboardController.ready();
        pageLoading = false;

    }
);
// ]]>
</script>
</body>
</html>

This section finishes by submitting any token values.

You can add more HTML and JavaScript for your own dashboards. For an example of modifying a converted HTML dashboard, see the HTML Dashboard Tutorial.
